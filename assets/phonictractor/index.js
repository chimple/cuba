window.__require=function t(o,r,e){function i(c,l){if(!r[c]){if(!o[c]){var s=c.split("/");if(s=s[s.length-1],!o[s]){var a="function"==typeof __require&&__require;if(!l&&a)return a(s,!0);if(n)return n(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=r[c]={exports:{}};o[c][0].call(u.exports,function(t){return i(o[c][1][t]||t)},u,u.exports,t,o,r,e)}return r[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<e.length;c++)i(e[c]);return i}({phonictractor_drag:[function(t,o,r){"use strict";cc._RF.push(o,"e4098tLChNJ3qDgl7RyRMjd","phonictractor_drag");var e,i=this&&this.__extends||(e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])})(t,o)},function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}),n=this&&this.__decorate||function(t,o,r,e){var i,n=arguments.length,c=n<3?o:null===e?e=Object.getOwnPropertyDescriptor(o,r):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,o,r,e);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(n<3?i(c):n>3?i(o,r,c):i(o,r))||c);return n>3&&c&&Object.defineProperty(o,r,c),c};Object.defineProperty(r,"__esModule",{value:!0});var c=t("../../../common/scripts/lib/error-handler"),l=t("../../../common/scripts/drag"),s=t("../../../common/scripts/util"),a=t("../../../common/scripts/lessonController"),u=t("../../../common/scripts/lib/config"),p=cc._decorator,d=p.ccclass,h=(p.property,function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o._soundClip=null,o}return i(o,t),o.prototype.onLoad=function(){var t=this;this.label.string=u.default.wide?" "+this.node.name+" ":this.node.name,s.Util.loadGameAudioOrPhonics(this.node.name.toLowerCase(),function(o){null!=o&&(t._soundClip=o)})},o.prototype.onTouchStart=function(o){if(t.prototype.onTouchStart.call(this,o),null!=this._soundClip)try{a.default.getFriend().speak(this._soundClip)}catch(r){console.log("Failed playing sound")}},o.prototype.onTouchEnd=function(o){t.prototype.onTouchEnd.call(this,o),this.match?this.node.emit("phonicTractorMatch",this):this.node.emit("phonicTractorNoMatch")},n([c.catchError()],o.prototype,"onTouchEnd",null),n([d],o)}(l.default));r.default=h,cc._RF.pop()},{"../../../common/scripts/drag":void 0,"../../../common/scripts/lessonController":void 0,"../../../common/scripts/lib/config":void 0,"../../../common/scripts/lib/error-handler":void 0,"../../../common/scripts/util":void 0}],phonictractor:[function(t,o,r){"use strict";cc._RF.push(o,"5bfc5YJVeVKdpzUCaJg9HZ5","phonictractor");var e,i=this&&this.__extends||(e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])})(t,o)},function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}),n=this&&this.__decorate||function(t,o,r,e){var i,n=arguments.length,c=n<3?o:null===e?e=Object.getOwnPropertyDescriptor(o,r):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,o,r,e);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(c=(n<3?i(c):n>3?i(o,r,c):i(o,r))||c);return n>3&&c&&Object.defineProperty(o,r,c),c};Object.defineProperty(r,"__esModule",{value:!0});var c=t("../../../common/scripts/lib/config"),l=t("../../../common/scripts/util"),s=t("./phonictractor_drag"),a=t("../../../common/scripts/lib/error-handler"),u=t("../../../common/scripts/game"),p=t("../../../common/scripts/drag"),d=cc._decorator,h=d.ccclass,f=d.property,y=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.truckNode=null,o.trolleyPrefab=null,o.boxPrefab=null,o.metalAudio=null,o.truckInAudio=null,o.truckOutAudio=null,o.trolley=[],o.box=null,o.count=1,o.totalPieces=0,o.finishTruckMoveTo=-2e3,o.firstDrag=null,o.firstDrop=null,o._isRTL=!1,o}return i(o,t),o.prototype.onLoad=function(){var t=this;p.default.letDrag=!1,cc.director.getCollisionManager().enabled=!0,this._isRTL=c.default.i.direction==c.Direction.RTL,this.totalPieces++,this.completed=[],this.wordAudio=new Map;var o,r,e,i,n,s,a,u=c.default.getInstance().data[0].toString().split(",");u[0],u[1],u[2],u[3],this.answer=u[4],this.temp=u[5],o=u[6],i=u[7],null==(r=u[8])&&(r=""),null==(n=u[9])&&(n=""),null==(e=u[10])&&(e=""),null==(s=u[11])&&(s=""),this.truckNode.x=cc.winSize.width/2,this.word=[o],""!=r&&this.word.push(r),""!=e&&this.word.push(e),this._isRTL&&(this.truckNode.x=-cc.winSize.width/2,this.finishTruckMoveTo=2e3),this.wordAudio.set(this.answer,this.temp),this.wordAudio.set(o,i),this.wordAudio.set(r,n),this.wordAudio.set(e,s),console.log("words"+this.word),this.onTouchAudio(this.wordAudio.get(this.answer)),this.instantiateTrolley(0),0!=r.length&&(this.count++,this.instantiateTrolley(1)),0!=e.length&&(this.count++,this.instantiateTrolley(2)),c.default.i.direction==c.Direction.RTL?(this.truckNode.scaleX=-1,a=100*(this.count-1)+310):a=100*-(this.count-1)-310,(new cc.Tween).target(this.truckNode).call(function(){l.Util.playSfx(t.truckInAudio)}).to(2.1,{x:a},{progress:null,easing:function(t){return t}}).call(function(){var o=0;t.trolley.forEach(function(r){o++,(new cc.Tween).target(r).call(function(){l.Util.playSfx(t.metalAudio)}).to(.5,{position:cc.v2(r.position.x+20*o,r.position.y)},{progress:null,easing:"elasticOut"}).start()}),t.showOptions()}).start(),this.node.getChildByName("board").getChildByName("answer_label").getComponent(cc.Label).string=c.default.wide?" "+this.answer+" ":this.answer},o.prototype.instantiateTrolley=function(t){this.trolley[t]=cc.instantiate(this.trolleyPrefab),this.trolley[t].parent=this.truckNode,this.trolley[t].position=cc.v3(this.trolley[t].position.x+260*t,-75,0),this.trolley[t].getChildByName("drop_area").name=this.word[t],0==t&&(this.firstDrop=this.trolley[t])},o.prototype.showOptions=function(){var t=this,o=this.word[0],r=this.word;Math.random()>.3&&(r=l.Util.shuffle(this.word));for(var e=0;e<this.count;e++){var i=cc.instantiate(this.boxPrefab),n=i.getComponent(s.default);null!=n&&(n.label.string=r[e]),r[e]==o&&(this.firstDrag=i),i.name=r[e];var c=new cc.Node;if(c.addChild(i),c.name=r[e],this.node.getChildByName("New Layout").addChild(c),i.on("phonicTractorMatch",this.onMatch.bind(this)),i.on("phonicTractorNoMatch",function(){return t.node.emit("wrong")}),this._isRTL){var a=new cc.Node;a.name="shouldFlip",i.addChild(a)}}l.Util.loadGameSound(this.wordAudio.get(this.answer),function(o){null!=o&&(t.friend.extraClip=o),l.Util.showHelp(t.firstDrag,t.firstDrop),p.default.letDrag=!0})},o.prototype.onTouchAudio=function(t){var o=this;l.Util.loadGameSound(t,function(t){null!=t&&o.friend.speak(t)})},o.prototype.onMatch=function(){var t=this;this.node.emit("correct"),0==--this.count&&(new cc.Tween).target(this.truckNode).delay(1).call(function(){t.friend.speakExtra()}).delay(1).call(function(){var o=0;l.Util.playSfx(t.metalAudio),t.trolley.forEach(function(t){o++,(new cc.Tween).target(t).to(.5,{position:cc.v2(t.position.x-20*o,t.position.y)},{progress:null,easing:"sineOut"}).start()})}).delay(1).call(function(){l.Util.playSfx(t.truckOutAudio)}).to(2,{x:this.finishTruckMoveTo},{progress:null,easing:function(t){return t}}).call(function(){return t.match()}).start()},o.prototype.match=function(){--this.totalPieces<=0&&this.node.emit("nextProblem")},o.prototype.onDestroy=function(){cc.audioEngine.stopAllEffects()},n([f(cc.Node)],o.prototype,"truckNode",void 0),n([f(cc.Prefab)],o.prototype,"trolleyPrefab",void 0),n([f(cc.Prefab)],o.prototype,"boxPrefab",void 0),n([f({type:cc.AudioClip})],o.prototype,"metalAudio",void 0),n([f({type:cc.AudioClip})],o.prototype,"truckInAudio",void 0),n([f({type:cc.AudioClip})],o.prototype,"truckOutAudio",void 0),n([a.catchError()],o.prototype,"onLoad",null),n([a.catchError()],o.prototype,"instantiateTrolley",null),n([a.catchError()],o.prototype,"showOptions",null),n([a.catchError()],o.prototype,"onTouchAudio",null),n([a.catchError()],o.prototype,"onMatch",null),n([a.catchError()],o.prototype,"match",null),n([a.catchError()],o.prototype,"onDestroy",null),n([h],o)}(u.default);r.default=y,cc._RF.pop()},{"../../../common/scripts/drag":void 0,"../../../common/scripts/game":void 0,"../../../common/scripts/lib/config":void 0,"../../../common/scripts/lib/error-handler":void 0,"../../../common/scripts/util":void 0,"./phonictractor_drag":"phonictractor_drag"}]},{},["phonictractor","phonictractor_drag"]);