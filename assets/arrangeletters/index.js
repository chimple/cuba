window.__require=function t(e,o,r){function i(c,a){if(!o[c]){if(!e[c]){var l=c.split("/");if(l=l[l.length-1],!e[l]){var s="function"==typeof __require&&__require;if(!a&&s)return s(l,!0);if(n)return n(l,!0);throw new Error("Cannot find module '"+c+"'")}c=l}var h=o[c]={exports:{}};e[c][0].call(h.exports,function(t){return i(e[c][1][t]||t)},h,h.exports,t,e,o,r)}return o[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<r.length;c++)i(r[c]);return i}({arrangeLetters:[function(t,e,o){"use strict";cc._RF.push(e,"2137c29qlpJiK1XLcEby1WA","arrangeLetters");var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,c=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../common/scripts/util"),a=t("../../../common/scripts/lib/config"),l=t("../../../common/scripts/game"),s=cc._decorator,h=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playground=null,e.playground2=null,e.ball2=null,e.ball=null,e.imagePrefab=null,e.isSoundPlaying=!1,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){var t;t=a.default.getInstance().data[0],this.level=t[0],this.worksheet=t[1],this.problem=t[2],this.backgroundName=t[3],this.objectName=t[4],this.word=t[5],this.wordAudioFileName=t[6],this.imageFileName=t[7],this.correctLetterArray=this.word.split(","),o.correctPosition=new Map,o.wordLength=this.correctLetterArray.length,this.loadBackground(),o.letterArray=this.word.split(","),this.makeDragObjects(),this.startGameSound(),this.node.getChildByName("friendPos").zIndex=1,this.node.getChildByName("friendPos").scale=.5,c.Util.playGameSound(this.wordAudioFileName,function(){})},e.prototype.makeDragObjects=function(){for(var t=c.Util.shuffle(this.correctLetterArray),e=0;e<this.correctLetterArray.length;e++){var r=cc.instantiate(this[this.objectName]);r.parent=this.node,r.name=t[e];for(var i=0;i<o.letterArray.length;i++)if(r.name===o.letterArray[i]){r.name=r.name+e,o.letterArray[i]=o.letterArray[i]+e;break}r.width=(1-.1*this.correctLetterArray.length+.7)*r.width,r.height=(1-.1*this.correctLetterArray.length+.7)*r.height,r.getChildByName("objLabel").getComponent(cc.Label).fontSize=150*(1-.1*this.correctLetterArray.length+.5),r.getChildByName("objLabel").getComponent(cc.Label).lineHeight=150*(1-.1*this.correctLetterArray.length+.5),r.position=cc.v3(this.correctLetterArray.length<=4?-cc.winSize.width/2.8+e*cc.winSize.width/this.correctLetterArray.length:-cc.winSize.width/2.4+e*cc.winSize.width/this.correctLetterArray.length,-cc.winSize.height/4),o.correctPosition.set(r.name,r.position.x),r.getChildByName("objLabel").getComponent(cc.Label).string=t[e]}},e.prototype.loadBackground=function(){var t=cc.instantiate(this[this.backgroundName]);this.node.addChild(t);var e=cc.instantiate(this.imagePrefab);this.node.addChild(e),c.Util.loadTexture(this.imageFileName,function(t){e.getChildByName("image").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t)})},e.prototype.startGameSound=function(){var t=this;c.Util.loadGameSound(this.wordAudioFileName,function(e){null!=e&&(t.friend.extraClip=e)})},n([u(cc.Prefab)],e.prototype,"playground",void 0),n([u(cc.Prefab)],e.prototype,"playground2",void 0),n([u(cc.Prefab)],e.prototype,"ball2",void 0),n([u(cc.Prefab)],e.prototype,"ball",void 0),n([u(cc.Prefab)],e.prototype,"imagePrefab",void 0),o=n([h],e)}(l.default);o.default=p,cc._RF.pop()},{"../../../common/scripts/game":void 0,"../../../common/scripts/lib/config":void 0,"../../../common/scripts/util":void 0}],dragObj:[function(t,e,o){"use strict";cc._RF.push(e,"9def2ENnVJIraLwiLEaCkx3","dragObj");var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,c=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../common/scripts/drag"),a=t("./arrangeLetters"),l=t("../../../common/scripts/util"),s=cc._decorator,h=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.correctClip=null,e.richTextNode=null,e._text=null,e._soundName=null,e._soundClip=null,e.isCollisionEnable=!1,e.goToOriginalPosition=!0,e.positionArray=[],e.currentXPos=null,e.done=!1,e.allSwapCorrect=[],e.touchSoundIsPlaying=!1,e}return i(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0,cc.macro.ENABLE_MULTI_TOUCH=!1;for(var t=0;t<a.default.wordLength-1;t++)this.allSwapCorrect[t]=!1},e.prototype.onTouchStart=function(e){var o=this;t.prototype.onTouchStart.call(this,e),this.touchSoundIsPlaying||(this.touchSoundIsPlaying=!0,l.Util.speakPhonicsOrLetter(e.currentTarget.name,function(){o.touchSoundIsPlaying=!1})),this.goToOriginalPosition=!0,this.isCollisionEnable=!0},e.prototype.onTouchMove=function(e){t.prototype.onTouchMove.call(this,e),this.node.setPosition(this.node.position.x,-cc.winSize.height/4),e.currentTarget.position.z=1},e.prototype.onTouchEnd=function(e){t.prototype.onTouchEnd.call(this,e);var o=cc.moveTo(.1,cc.v2(a.default.correctPosition.get(e.currentTarget.name),-cc.winSize.height/4));this.node.runAction(o),this.checkIfMatch(),this.isCollisionEnable=!1},e.prototype.onCollisionEnter=function(t,e){if(this.isCollisionEnable){this.selfName=e.node.name,this.otherName=t.node.name;var o=cc.moveTo(.1,cc.v2(a.default.correctPosition.get(this.selfName),-cc.winSize.height/4));t.node.runAction(o);var r=a.default.correctPosition.get(this.selfName);a.default.correctPosition.set(this.selfName,a.default.correctPosition.get(this.otherName)),a.default.correctPosition.set(this.otherName,r)}},e.prototype.onCollisionExit=function(){},e.prototype.checkIfMatch=function(){var t=this;this.allSwapCorrect.forEach(function(e,o){t.allSwapCorrect[o]=!1});for(var e=0;e<a.default.wordLength;e++)a.default.correctPosition.get(a.default.letterArray[e])<a.default.correctPosition.get(a.default.letterArray[e+1])&&(cc.log(a.default.correctPosition.get(a.default.letterArray[e])+a.default.correctPosition.get(a.default.letterArray[e+1])),this.allSwapCorrect[e]=!0);this.done=this.allSwapCorrect.every(function(t){return!0===t}),cc.log(this.allSwapCorrect),cc.log(a.default.correctPosition),this.done&&(this.node.parent.emit("correct"),this.node.parent.emit("nextProblem"))},n([u(cc.AudioClip)],e.prototype,"correctClip",void 0),n([u(cc.RichText)],e.prototype,"richTextNode",void 0),n([h],e)}(c.default);o.default=p,cc._RF.pop()},{"../../../common/scripts/drag":void 0,"../../../common/scripts/util":void 0,"./arrangeLetters":"arrangeLetters"}]},{},["arrangeLetters","dragObj"]);