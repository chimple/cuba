window.__require=function t(e,o,r){function c(i,a){if(!o[i]){if(!e[i]){var l=i.split("/");if(l=l[l.length-1],!e[l]){var s="function"==typeof __require&&__require;if(!a&&s)return s(l,!0);if(n)return n(l,!0);throw new Error("Cannot find module '"+i+"'")}i=l}var u=o[i]={exports:{}};e[i][0].call(u.exports,function(t){return c(e[i][1][t]||t)},u,u.exports,t,e,o,r)}return o[i].exports}for(var n="function"==typeof __require&&__require,i=0;i<r.length;i++)c(r[i]);return c}({matchingcard:[function(t,e,o){"use strict";cc._RF.push(e,"07ee2NU7FFLYJWEUG++IlM9","matchingcard");var r,c=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,r){var c,n=arguments.length,i=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(i=(n<3?c(i):n>3?c(e,o,i):c(e,o))||i);return n>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../common/scripts/lib/config"),a=t("../../../common/scripts/util"),l=t("../../../common/scripts/lib/error-handler"),s=t("../../../common/scripts/game"),u=cc._decorator,d=u.ccclass,p=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.back=null,e.front=null,e.shadow=null,e.left=null,e.right=null,e.match=null,e.truck=null,e.choice=null,e.isMoving=!1,e.cards=null,e.choiceY=null,e}return c(e,t),e.prototype.onLoad=function(){var t=this;this.choiceY=this.choice.y,this.choice.y=-cc.winSize.height;var e=this.truck.x;(new cc.Tween).target(this.truck).set({x:cc.winSize.width}).to(3,{x:e},{progress:null,easing:"quadOut"}).call(function(){t.truck.getComponent(cc.Animation).stop(),t.onIteration()}).start(),this.node.on("nextIteration",function(){t.onIteration()})},e.prototype.onIteration=function(){var t=this;this.left.removeAllChildren(),this.right.removeAllChildren(),this.isMoving=!1,this.choice.y=-cc.winSize.height;var e=i.default.getInstance().data[0],o=(e[0],e[1],e[2],e[3]),r=e[4],c=[r,e[5],e[6],e[7]];this.cards=[],a.Util.loadTexture(r,function(e){var o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e),t.left.addChild(o)});for(var n=null,l=0;l<parseInt(o);l++){var s=this.makeChoiceCard(c[l],l);this.cards.push(s),0==l&&(n=s)}a.Util.shuffle(this.cards),this.cards.forEach(function(e){t.choice.addChild(e)}),(new cc.Tween).target(this.choice).to(.25,{y:this.choiceY},{progress:null,easing:"quadOut"}).call(function(){a.Util.showHelp(n,n)}).start()},e.prototype.makeChoiceCard=function(t,e){var o=this,r=new cc.Node(e.toString());r.addComponent(cc.Sprite).spriteFrame=this.front;var c=new cc.Node,n=c.addComponent(cc.Sprite);a.Util.loadTexture(t,function(t){n.spriteFrame=new cc.SpriteFrame(t)}),r.addChild(c),r.on("touchstart",function(){o.isMoving||(o.isMoving=!0,(new cc.Tween).target(r).to(.5,{position:r.convertToNodeSpaceAR(o.right.convertToWorldSpaceAR(cc.Vec2.ZERO))},null).call(function(){0==e?(o.node.emit("correct"),o.scheduleOnce(function(){r.removeFromParent(!1),r.position=cc.Vec2.ZERO,o.right.addChild(r),o.choice.removeAllChildren();var t=i.default.getInstance();t.problem==t.totalProblems?(o.truck.getComponent(cc.Animation).play(),(new cc.Tween).target(o.truck).delay(1).to(2,{x:1.5*-cc.winSize.width},{progress:null,easing:"quadOut"}).call(function(){o.node.emit("nextProblem",!0)}).start()):o.node.emit("nextProblem",!1)},1)):(o.node.emit("wrong"),(new cc.Tween).target(r).to(.25,{position:cc.Vec2.ZERO},{progress:null,easing:"quadOut"}).call(function(){o.isMoving=!1}).start())}).start())},this);var l=new cc.Node;return l.width=168,l.height=200,l.addChild(r),l},n([p(cc.SpriteFrame)],e.prototype,"back",void 0),n([p(cc.SpriteFrame)],e.prototype,"front",void 0),n([p(cc.SpriteFrame)],e.prototype,"shadow",void 0),n([p(cc.Node)],e.prototype,"left",void 0),n([p(cc.Node)],e.prototype,"right",void 0),n([p(cc.Node)],e.prototype,"match",void 0),n([p(cc.Node)],e.prototype,"truck",void 0),n([p(cc.Node)],e.prototype,"choice",void 0),n([l.default()],e.prototype,"onLoad",null),n([d],e)}(s.default);o.default=h,cc._RF.pop()},{"../../../common/scripts/game":void 0,"../../../common/scripts/lib/config":void 0,"../../../common/scripts/lib/error-handler":void 0,"../../../common/scripts/util":void 0}]},{},["matchingcard"]);