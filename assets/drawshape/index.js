window.__require=function t(e,n,o){function r(c,a){if(!n[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var p="function"==typeof __require&&__require;if(!a&&p)return p(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=n[c]={exports:{}};e[c][0].call(u.exports,function(t){return r(e[c][1][t]||t)},u,u.exports,t,e,n,o)}return n[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<o.length;c++)r(o[c]);return r}({drawshape:[function(t,e,n){"use strict";cc._RF.push(e,"3f0f1gHZZ9PW7BGMLuhBiRT","drawshape");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.DrawShape=n.GAME_VOICE=n.LETTER_TRACING_TEXTURE=void 0;var c=t("../../../common/scripts/lib/config"),a=cc._decorator.ccclass,s=cc._decorator.property,p=t("../../../common/scripts/lib/error-handler"),u=t("../../../common/scripts/helper"),l=t("../../../common/Tracing/scripts/tracing-container"),f=t("../../../common/scripts/game");n.LETTER_TRACING_TEXTURE="games/lettertracing/textures/",n.GAME_VOICE="games/lettertracing/sounds";var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressMonitorPrefab=null,e._tracingContainerComponent=null,e._imageName=null,e._currentConfig=null,e._imageTracingContainer=null,e}return r(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!1,this._currentConfig=this.processConfiguration(c.default.getInstance().data[0]),null!==this._currentConfig&&(this._imageTracingContainer=this.node,this._imageTracingContainer.scale*=1,this.node.width=cc.winSize.width,this.node.height=cc.winSize.height,this._tracingContainer=cc.instantiate(this.tracingContainerPrefab),this.setImageToDisplay(this._currentConfig.image),this.subScribeToTracingEvents())},e.prototype.subScribeToTracingEvents=function(){var t=this;this.node.on(u.TRACING_FINISHED,function(e){e.stopPropagation(),t.tracingFinished()}),this.node.on(u.TRACING_CORRECT,function(e){e.stopPropagation(),t.node.emit("correct")}),this.node.on(u.TRACING_WRONG,function(e){e.stopPropagation(),t.node.emit("wrong")})},e.prototype.tracingFinished=function(){var t=this;this.scheduleOnce(function(){t.node.emit("nextProblem")},1)},e.prototype.setImageToDisplay=function(t){this._tracingContainerComponent=this._tracingContainer.getComponent(l.default),this._tracingContainerComponent.tracingImage=t,this._tracingContainerComponent.lineWidth=25,this._tracingContainerComponent.traceGenerationMode=!1,this.node.addChild(this._tracingContainer),this._tracingContainer.setPosition(new cc.Vec2(0,100)),this._tracingContainerComponent.traceGraphics.emit("enabledGraphics")},e.prototype.processConfiguration=function(t){void 0===t&&(t=[]);var e=[].concat.apply([],t);return{level:e[0],workSheet:e[1],problemNo:e[2],image:e[3]}},e.prototype.onDestroy=function(){cc.resources.release(this._imageName,cc.SpriteFrame),cc.audioEngine.stopAllEffects()},i([s(cc.Prefab)],e.prototype,"progressMonitorPrefab",void 0),i([s(cc.Prefab)],e.prototype,"tracingContainerPrefab",void 0),i([p.default()],e.prototype,"onLoad",null),i([p.default()],e.prototype,"subScribeToTracingEvents",null),i([p.default()],e.prototype,"tracingFinished",null),i([p.default()],e.prototype,"setImageToDisplay",null),i([p.default()],e.prototype,"processConfiguration",null),i([a],e)}(f.default);n.DrawShape=g,cc._RF.pop()},{"../../../common/Tracing/scripts/tracing-container":void 0,"../../../common/scripts/game":void 0,"../../../common/scripts/helper":void 0,"../../../common/scripts/lib/config":void 0,"../../../common/scripts/lib/error-handler":void 0}]},{},["drawshape"]);