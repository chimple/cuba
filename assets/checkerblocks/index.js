window.__require=function t(e,o,r){function n(a,s){if(!o[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var d="function"==typeof __require&&__require;if(!s&&d)return d(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var h=o[a]={exports:{}};e[a][0].call(h.exports,function(t){return n(e[a][1][t]||t)},h,h.exports,t,e,o,r)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<r.length;a++)n(r[a]);return n}({checkerblocks:[function(t,e,o){"use strict";cc._RF.push(e,"f1e51cat4FPiIsV9dU4d18L","checkerblocks");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(i<3?n(a):i>3?n(e,o,a):n(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../common/scripts/lib/config"),s=t("../../../common/scripts/util"),c=t("../../../common/scripts/lib/error-handler"),d=t("../../../common/scripts/drag"),h=t("../../../common/scripts/game"),l=cc._decorator,u=l.ccclass,p=l.property,f=["#E3EB0E","#FF809A","#74F750","#56DEA8","#A857FF"],b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dragPrefab=null,e.dropPrefab=null,e.dragTilePrefab=null,e.tilePrefab=null,e.board=null,e.dark=null,e.light=null,e.truck=null,e.truckInAudio=null,e.truckOutAudio=null,e.matchCount=0,e.boardContents=[[1,2,3,4,5,6,7,8,9,10],[11,12,13,14,15,16,17,18,19,20],[21,22,23,24,25,26,27,28,29,30],[31,32,33,34,35,36,37,38,39,40],[41,42,43,44,45,46,47,48,49,50],[51,52,53,54,55,56,57,58,59,60],[61,62,63,64,65,66,67,68,69,70],[71,72,73,74,75,76,77,78,79,80],[81,82,83,84,85,86,87,88,89,90],[91,92,93,94,95,96,97,98,99,100]],e.dragTiles=new Map,e.colorMap=new Map,e}return n(e,t),e.prototype.onLoad=function(){var t=this;cc.director.getCollisionManager().enabled=!0,d.default.letDrag=!1;var e=a.default.getInstance().data[0];switch(e[0],e[1],e[2],e[3]){case"1":this.generateRandomSquares();break;case"2":this.generateHorizontalStrips();break;case"3":this.generateVerticalStrips();break;case"4":this.generateHorizontalHalfStrips();break;case"5":this.generate5Multiples();break;case"6":this.generatePlus();break;case"7":this.generate2by2Squares();break;case"8":this.generateEvenColumns();break;case"9":this.generateOddColumns();break;case"10":this.generateRandomDoubleSquares();break;case"11":this.generateAllSingleSquares();break;default:this.generateRandomSquares()}for(var o=null,r=null,n=0;n<10;n++)for(var i=0;i<10;i++){var c=10*n+i+1,h=new cc.Node,l=h.addComponent(cc.Sprite);h.x=69*i,h.y=69*-n,h.anchorX=0,h.anchorY=1,l.spriteFrame=n%2==0?i%2==0?this.dark:this.light:i%2==0?this.light:this.dark,this.board.addChild(h);var u=cc.instantiate(this.boardContents[n][i]<0?this.dropPrefab:this.tilePrefab);if(u.name=c.toString(),u.x=69*i,u.y=69*-n,u.zIndex=101-c,this.board.addChild(u),this.boardContents[n][i]<0){if(!this.dragTiles.has(this.boardContents[n][i])){var p=cc.instantiate(this.dragTilePrefab);p.name=(-this.boardContents[n][i]).toString(),this.dragTiles.set(this.boardContents[n][i],p),this.colorMap.set(-this.boardContents[n][i],(new cc.Color).fromHEX(f[Math.floor(Math.random()*f.length)])),p.on("hundredpuzzleMatch",this.onMatch,this),p.on("hundredpuzzleNoMatch",function(){t.node.emit("wrong")}),null==o&&(o=p,r=u)}this.addToDragTile(-this.boardContents[n][i],c,this.dragTiles.get(this.boardContents[n][i]))}}var b=this.truck.x;(new cc.Tween).target(this.truck).set({x:cc.winSize.width}).call(function(){s.Util.playSfx(t.truckInAudio)}).to(3,{x:b},{progress:null,easing:"quadOut"}).call(function(){t.truck.getComponent(cc.Animation).stop(),t.dragTiles.forEach(function(e){e.position=cc.v2(-cc.winSize.width/2+Math.random()*(280-e.width),-cc.winSize.height),e.zIndex=100-parseInt(e.name),t.node.addChild(e),(new cc.Tween).target(e).delay(2*Math.random()).to(.5,{y:Math.random()*(cc.winSize.height-128-e.height)-cc.winSize.height/2+e.height},{progress:null,easing:"sineOut"}).start()}),t.scheduleOnce(function(){d.default.letDrag=!0,s.Util.showHelp(o,r)},2.5)}).start()},e.prototype.onMatch=function(){var t=this;this.node.emit("correct"),++this.matchCount>=this.dragTiles.size&&(this.truck.getComponent(cc.Animation).play(),(new cc.Tween).target(this.truck).delay(2).call(function(){s.Util.playSfx(t.truckOutAudio)}).to(3,{x:2*-cc.winSize.width},{progress:null,easing:"quadOut"}).call(function(){t.node.emit("nextProblem")}).start())},e.prototype.addToDragTile=function(t,e,o){var r=cc.instantiate(this.dragPrefab);r.name=e.toString(),r.x=69*((e-1)%10-(t-1)%10),r.y=69*(Math.floor((t-1)/10)-Math.floor((e-1)/10)),o.addChild(r),o.width<r.x+69&&(o.width=r.x+69),o.height<69-r.y&&(o.height=69-r.y);var n=r.getChildByName("sprite");null!=n&&(n.color=this.colorMap.get(t))},e.prototype.generateRandomSquares=function(){var t=0;do{var e=Math.floor(90*Math.random()),o=Math.floor(3*Math.random()),r=Math.floor(e/10),n=e%10;n+1<10&&this.boardContents[r][n]>0&&this.boardContents[r][n+1]>0&&this.boardContents[r+1][n]>0&&this.boardContents[r+1][n]>0&&(0==o?r+2<10&&this.boardContents[r+2][n]>0&&this.boardContents[r+2][n+1]>0&&(this.boardContents[r][n]=-(e+1),this.boardContents[r][n+1]=-(e+1),this.boardContents[r+1][n]=-(e+1),this.boardContents[r+1][n+1]=-(e+1),this.boardContents[r+2][n]=-(e+1),this.boardContents[r+2][n+1]=-(e+1),t++):1==o?n+2<10&&this.boardContents[r][n+2]>0&&this.boardContents[r+1][n+2]>0&&(this.boardContents[r][n]=-(e+1),this.boardContents[r][n+1]=-(e+1),this.boardContents[r][n+2]=-(e+1),this.boardContents[r+1][n]=-(e+1),this.boardContents[r+1][n+1]=-(e+1),this.boardContents[r+1][n+2]=-(e+1),t++):r+2<10&&n+2<10&&this.boardContents[r][n+2]>0&&this.boardContents[r+1][n+2]>0&&this.boardContents[r+2][n]>0&&this.boardContents[r+2][n+1]>0&&this.boardContents[r+2][n+2]>0&&(this.boardContents[r][n]=-(e+1),this.boardContents[r][n+1]=-(e+1),this.boardContents[r][n+2]=-(e+1),this.boardContents[r+1][n]=-(e+1),this.boardContents[r+1][n+1]=-(e+1),this.boardContents[r+1][n+2]=-(e+1),this.boardContents[r+2][n]=-(e+1),this.boardContents[r+2][n+1]=-(e+1),this.boardContents[r+2][n+2]=-(e+1),t++))}while(t<8)},e.prototype.generateHorizontalStrips=function(){for(var t=0;t<10;t++)for(var e=0;e<10;e++)this.boardContents[t][e]=-(10*t+1)},e.prototype.generateVerticalStrips=function(){for(var t=0;t<10;t++)for(var e=0;e<10;e++)this.boardContents[t][e]=-(e+1)},e.prototype.generateHorizontalHalfStrips=function(){var t=0;do{var e=5*Math.floor(20*Math.random())+1;if(this.boardContents[Math.floor((e-1)/10)][(e-1)%10]>0){for(var o=0;o<5;o++)this.boardContents[Math.floor((e-1)/10)][(e-1)%10+o]=-e;t++}}while(t<16)},e.prototype.generate5Multiples=function(){for(var t=0;t<10;t++)for(var e=4;e<10;e+=5)this.boardContents[t][e]=-(10*t+e+1)},e.prototype.generatePlus=function(){var t=0;do{var e=Math.floor(70*Math.random()),o=Math.floor(e/10),r=e%10;this.boardContents[o][r+1]>0&&this.boardContents[o+1][r]>0&&this.boardContents[o+1][r+2]>0&&this.boardContents[o+2][r+1]>0&&(this.boardContents[o][r+1]=-(e+1),this.boardContents[o+1][r]=-(e+1),this.boardContents[o+1][r+1]=-(e+1),this.boardContents[o+1][r+2]=-(e+1),this.boardContents[o+2][r+1]=-(e+1),t++)}while(t<8)},e.prototype.generate2by2Squares=function(){var t=0;do{var e=Math.floor(25*Math.random()),o=2*Math.floor(e/5),r=e%5*2;this.boardContents[o][r]>0&&(this.boardContents[o][r]=-(10*o+r+1),this.boardContents[o+1][r]=-(10*o+r+1),this.boardContents[o][r+1]=-(10*o+r+1),this.boardContents[o+1][r+1]=-(10*o+r+1),t++)}while(t<16)},e.prototype.generateOddShapes=function(){},e.prototype.generateEvenColumns=function(){for(var t=0;t<10;t++)for(var e=1;e<10;e+=2)this.boardContents[t][e]=-(10*t+e+1)},e.prototype.generateOddColumns=function(){for(var t=0;t<10;t++)for(var e=0;e<10;e+=2)this.boardContents[t][e]=-(10*t+e+1)},e.prototype.generateRandomDoubleSquares=function(){var t=0;do{var e=!1,o=Math.floor(100*Math.random()),r=1==Math.floor(2*Math.random()),n=Math.floor(o/10),i=o%10;if(this.boardContents[n][i]>0&&(r?i+1<10&&this.boardContents[n][i+1]>0&&(this.boardContents[n][i]=-(o+1),this.boardContents[n][i+1]=-(o+1),t++,e=!0):n+1<10&&this.boardContents[n+1][i]>0&&(this.boardContents[n][i]=-(o+1),this.boardContents[n+1][i]=-(o+1),t++,e=!0)),!e)t:for(var a=0;a<10;a++)for(var s=0;s<10;s++)if(this.boardContents[a][s]>0){var c=10*a+s;if(s+1<10&&this.boardContents[a][s+1]>0){this.boardContents[a][s]=-(c+1),this.boardContents[a][s+1]=-(c+1),t++,e=!0;break t}if(a+1<10&&this.boardContents[a+1][s]>0){this.boardContents[a][s]=-(c+1),this.boardContents[a+1][s]=-(c+1),t++,e=!0;break t}}}while(t<45&&e)},e.prototype.generateAllSingleSquares=function(){for(var t=0;t<10;t++)for(var e=0;e<10;e++){var o=10*t+e+1;this.boardContents[t][e]=-o}},i([p(cc.Prefab)],e.prototype,"dragPrefab",void 0),i([p(cc.Prefab)],e.prototype,"dropPrefab",void 0),i([p(cc.Prefab)],e.prototype,"dragTilePrefab",void 0),i([p(cc.Prefab)],e.prototype,"tilePrefab",void 0),i([p(cc.Node)],e.prototype,"board",void 0),i([p(cc.SpriteFrame)],e.prototype,"dark",void 0),i([p(cc.SpriteFrame)],e.prototype,"light",void 0),i([p(cc.Node)],e.prototype,"truck",void 0),i([p(cc.AudioClip)],e.prototype,"truckInAudio",void 0),i([p(cc.AudioClip)],e.prototype,"truckOutAudio",void 0),i([c.default()],e.prototype,"onLoad",null),i([u],e)}(h.default);o.default=b,cc._RF.pop()},{"../../../common/scripts/drag":void 0,"../../../common/scripts/game":void 0,"../../../common/scripts/lib/config":void 0,"../../../common/scripts/lib/error-handler":void 0,"../../../common/scripts/util":void 0}],hundredpuzzleDragTile:[function(t,e,o){"use strict";cc._RF.push(e,"6aa15w9Ff5EiaFEdcQ3bdxF","hundredpuzzleDragTile");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(i<3?n(a):i>3?n(e,o,a):n(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../common/scripts/drag"),s=cc._decorator,c=s.ccclass,d=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onTouchEnd=function(e){if(t.prototype.onTouchEnd.call(this,e),this.match)this.node.emit("hundredpuzzleMatch",this);else{this.node.emit("hundredpuzzleNoMatch");var o=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),r=this.node.getPosition(),n=!1;o.x+this.node.width>cc.winSize.width?(r.x-=o.x+this.node.width-cc.winSize.width,n=!0):o.x<0&&(r.x-=o.x,n=!0),o.y>cc.winSize.height?(r.y-=o.y-cc.winSize.height,n=!0):o.y-this.node.height<0&&(r.y-=o.y-this.node.height,n=!0),n&&(new cc.Tween).target(this.node).to(.25,{position:r},{progress:null,easing:"sineOut"}).start()}},i([c],e)}(a.default));o.default=d,cc._RF.pop()},{"../../../common/scripts/drag":void 0}],hundredpuzzleTile:[function(t,e,o){"use strict";cc._RF.push(e,"600ffKuTytNeKitMWAFPKxo","hundredpuzzleTile");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(i<3?n(a):i>3?n(e,o,a):n(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numberLabel=null,e}return n(e,t),e.prototype.onLoad=function(){this.numberLabel.string=this.node.name},i([c(cc.Label)],e.prototype,"numberLabel",void 0),i([s],e)}(cc.Component);o.default=d,cc._RF.pop()},{}]},{},["checkerblocks","hundredpuzzleDragTile","hundredpuzzleTile"]);