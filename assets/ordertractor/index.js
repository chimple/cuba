window.__require=function t(e,r,n){function o(a,c){if(!r[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!c&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(t){return o(e[a][1][t]||t)},l,l.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({numbertrainDrag:[function(t,e,r){"use strict";cc._RF.push(e,"dcaa4SgbbtBZJfoUQLRl+uB","numbertrainDrag");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../../common/scripts/drag"),c=cc._decorator,s=c.ccclass,u=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.num=null,e.numbertrain=null,e}return o(e,t),e.prototype.onTouchEnd=function(e){t.prototype.onTouchEnd.call(this,e),this.isDragging&&(this.match?this.numbertrain.emit("numbertrainMatch",this):this.numbertrain.emit("numbertrainNoMatch"))},i([u(cc.Label)],e.prototype,"num",void 0),i([u(cc.Node)],e.prototype,"numbertrain",void 0),i([s],e)}(a.default);r.default=l,cc._RF.pop()},{"../../../common/scripts/drag":void 0}],numbertrainDrop:[function(t,e,r){"use strict";cc._RF.push(e,"09812f4G5hIL6AbaR79Uoxg","numbertrainDrop");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../../common/scripts/drop"),c=cc._decorator,s=c.ccclass,u=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wagonBase=null,e.order=1,e}return o(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.wagonBase.scaleY=.5*this.order},i([u(cc.Node)],e.prototype,"wagonBase",void 0),i([u],e.prototype,"order",void 0),i([s],e)}(a.default);r.default=l,cc._RF.pop()},{"../../../common/scripts/drop":void 0}],ordertractor:[function(t,e,r){"use strict";cc._RF.push(e,"0bd5b3GLgBKOoj3SG3ZINoP","ordertractor");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var a=t("../../../common/scripts/util"),c=t("./numbertrainDrag"),s=t("../../../common/scripts/lib/config"),u=t("./numbertrainDrop"),l=t("../../../common/scripts/drag"),p=t("../../../common/scripts/lib/error-handler"),d=t("../../../common/scripts/game"),f=cc._decorator,h=f.ccclass,m=f.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.drag=null,e.outerDrop=null,e.choices=null,e.train=null,e.trainClip=null,e.metalClink=null,e.empty=0,e}return o(e,t),e.prototype.onLoad=function(){var t=this;cc.director.getCollisionManager().enabled=!0,l.default.letDrag=!1,this.node.on("numbertrainMatch",this.onMatch.bind(this)),this.node.on("numbertrainNoMatch",function(){t.node.emit("wrong")}),this.friend.isFace=!0;var e=s.default.getInstance().data[0],r=(e[0],e[1],e[2],e[3]),n="true"==e[4].toLowerCase(),o=this.generateNumbers(parseInt(r));n&&o.reverse(),this.empty=o.length;var i=null,p=null;o.forEach(function(e,r){var i=cc.instantiate(t.outerDrop),a=i.getChildByName("layout");if(null!=a){var c=a.getChildByName("drop");null!=c&&(c.name=e.toString(),c.getComponent(u.default).order=n?o.length-r:r+1,0==r&&(p=c))}var s=new cc.Node;s.width=i.width,s.height=i.height,s.addChild(i),t.train.addChild(s),(new cc.Tween).target(i).set({x:20*(r+1)}).delay(2).to(1,{x:0},{progress:null,easing:"sineIn"}).start()}),a.Util.shuffle(o),o.forEach(function(e){var r=cc.instantiate(t.drag);r.name=e.toString();var n=r.getComponent(c.default);n.num.string=e.toString(),n.numbertrain=t.node;var o=new cc.Node;o.width=r.width,o.height=r.height,o.addChild(r),t.choices.addChild(o),r.name==p.name&&(i=r)});var d=this.train.x;(new cc.Tween).target(this.train).call(function(){a.Util.playSfx(t.trainClip)}).set({x:d+cc.winSize.width}).to(3,{x:d},{progress:null,easing:"backOut"}).call(function(){a.Util.playSfx(t.metalClink)}).call(function(){l.default.letDrag=!0,a.Util.showHelp(i,p)}).start()},e.prototype.onMatch=function(){var t=this;this.node.emit("correct"),--this.empty<=0&&(l.default.letDrag=!1,(new cc.Tween).target(this.train).delay(1).call(function(){a.Util.playSfx(t.trainClip)}).to(1,{x:this.train.x-cc.winSize.width},{progress:null,easing:"backIn"}).call(function(){t.node.emit("nextProblem")}).start())},e.prototype.generateNumbers=function(t){switch(t){case 1:return[1,2,3,4,5];case 2:return[6,7,8,9,10];case 3:return this.generateIncrementals(2,4);case 4:return[2,4,6,8,10];case 5:return this.generateRandoms(1,10);case 6:return this.generateIncrementals(11,16);case 7:return this.generateIncrementals(6,16);case 8:return this.generateRandoms(1,20);case 9:return this.generateIncrementals(10,12,2);case 10:return this.generateMultiples(3,1,20);case 11:return this.generateIncrementals(20,46);case 12:return this.generateMultiples(5,20,50);case 13:return this.generateMultiples(3,20,50);case 14:return this.generateMultiples(10,1,100);case 15:return this.generateRandoms(1,50);case 16:return this.generateIncrementals(60,96);case 17:return this.generateMultiples(5,1,100);case 18:return this.generateRandoms(60,100);default:return this.generateRandoms(1,100)}},e.prototype.generateIncrementals=function(t,e,r){void 0===r&&(r=1);var n=Math.floor(Math.random()*(e-t))+t;return[n,n+1*r,n+2*r,n+3*r,n+4*r]},e.prototype.generateMultiples=function(t,e,r){var n=Math.ceil(e/t),o=Math.floor(r/t)-4,i=Math.floor(Math.random()*(o-n))+n;return[i*t,(i+1)*t,(i+2)*t,(i+3)*t,(i+4)*t]},e.prototype.generateRandoms=function(t,e){for(var r=[],n=function(){var n=Math.floor(Math.random()*(e-t))+t;r.find(function(t){return t==n})!=n&&r.push(n)};r.length<5;)n();return r.sort(function(t,e){return t-e})},i([m(cc.Prefab)],e.prototype,"drag",void 0),i([m(cc.Prefab)],e.prototype,"outerDrop",void 0),i([m(cc.Node)],e.prototype,"choices",void 0),i([m(cc.Node)],e.prototype,"train",void 0),i([m(cc.AudioClip)],e.prototype,"trainClip",void 0),i([m(cc.AudioClip)],e.prototype,"metalClink",void 0),i([p.default()],e.prototype,"onMatch",null),i([h],e)}(d.default);r.default=g,cc._RF.pop()},{"../../../common/scripts/drag":void 0,"../../../common/scripts/game":void 0,"../../../common/scripts/lib/config":void 0,"../../../common/scripts/lib/error-handler":void 0,"../../../common/scripts/util":void 0,"./numbertrainDrag":"numbertrainDrag","./numbertrainDrop":"numbertrainDrop"}]},{},["numbertrainDrag","numbertrainDrop","ordertractor"]);