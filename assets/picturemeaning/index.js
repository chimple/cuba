window.__require=function t(e,n,i){function o(c,a){if(!n[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var p=n[c]={exports:{}};e[c][0].call(p.exports,function(t){return o(e[c][1][t]||t)},p,p.exports,t,e,n,i)}return n[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<i.length;c++)o(i[c]);return o}({picturemeaning:[function(t,e,n){"use strict";cc._RF.push(e,"60e405EGHpAWrKWiiyVrQ/P","picturemeaning");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.PictureMeaningData=n.PictureMeaningType=void 0;var c,a=t("../../../common/scripts/lib/config"),s=t("./whatisthisChoice"),u=t("../../../common/scripts/lib/error-handler"),p=t("../../../common/scripts/util"),l=t("../../../common/scripts/game"),h=cc._decorator,f=h.ccclass,d=h.property;(function(t){t[t.Sentence=0]="Sentence",t[t.Picture=1]="Picture"})(c=n.PictureMeaningType||(n.PictureMeaningType={}));var y=function(t,e,n,i,o){this.index=t,this.type=e,this.text=n,this.pic=i,this.sound=o};n.PictureMeaningData=y;var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.choiceLayout=null,e.answerNode=null,e.imageAnswerButtonPrefab=null,e.imageChoiceButtonPrefab=null,e.textAnswerButtonPrefab=null,e.textChoiceButtonPrefab=null,e.trafficLight=null,e.fullLayout=null,e}return o(e,t),e.prototype.onLoad=function(){var t=this,e=a.default.getInstance().data[0],n=(e[0],e[1],e[2],e[3]),i=e[4],o=e[5],r=e[6],s=e[7],u=e[8],l=e[9],h=e[10],f=e[11],d=e[12];this.type="S"==n?c.Sentence:c.Picture;var y=[],g=this.setupNode(0,this.type,i,o,r);y.push(g),y.push(this.setupNode(1,this.type,s,u,l)),y.push(this.setupNode(2,this.type,h,f,d)),(y=p.Util.shuffleByMapSortMap(y)).forEach(function(e){t.choiceLayout.addChild(e)});var m=this.choiceLayout.getComponent(cc.Layout);null!=m&&(m.type=this.type==c.Sentence?cc.Layout.Type.HORIZONTAL:cc.Layout.Type.VERTICAL),p.Util.showHelp(g,g)},e.prototype.setupNode=function(t,e,n,i,o){var r=new y(t,e,n,i,o),a=new y(t,e==c.Sentence?c.Picture:c.Sentence,n,i,o),s=this.createAnswer(r);this.answerNode.addChild(s),0==t?(this.answerNode.height=s.height,this.answerNode.width=s.width):(s.y=cc.winSize.height,s.zIndex=1);var u=this.createChoice(a,s);return u.on("whatisthisCorrect",this.onMatch.bind(this)),u.on("whatisthisWrong",this.onNoMatch.bind(this)),u},e.prototype.onNoMatch=function(){this.node.emit("wrong"),this.trafficLight.play("red_signal")},e.prototype.onMatch=function(){var t=this;this.node.emit("correct"),this.trafficLight.play("green_signal"),this.choiceLayout.children.forEach(function(e){var n=e.getComponent(s.default);null!=n&&0!=n.data.index&&(new cc.Tween).target(e).delay(.5).by(.5,{x:t.type==c.Picture?-cc.winSize.width:0,y:t.type==c.Sentence?-cc.winSize.height:0},{progress:null,easing:"quadOut"}).start()}),(new cc.Tween).target(this.friendPos).delay(4).call(function(){t.fullLayout.getComponent(cc.Layout).spacingY=150,null!=t.friend&&t.friend.playAnimation("skating",1)}).to(2,{x:cc.winSize.width},null).call(function(){t.node.emit("nextProblem")}).start()},e.prototype.createAnswer=function(t){var e=cc.instantiate(t.type==c.Sentence?this.textAnswerButtonPrefab:this.imageAnswerButtonPrefab);t.type==c.Picture&&(e.getComponent(cc.Button).interactable=!1);var n=e.getComponent(s.default);return null!=n&&(n.data=t),e},e.prototype.createChoice=function(t,e){var n=cc.instantiate(t.type==c.Sentence?this.textChoiceButtonPrefab:this.imageChoiceButtonPrefab);n.name=t.type==c.Sentence?t.text:t.pic;var i=n.getComponent(s.default);return null!=i&&(i.data=t,i.answerNode=e),n},r([d(cc.Node)],e.prototype,"choiceLayout",void 0),r([d(cc.Node)],e.prototype,"answerNode",void 0),r([d(cc.Prefab)],e.prototype,"imageAnswerButtonPrefab",void 0),r([d(cc.Prefab)],e.prototype,"imageChoiceButtonPrefab",void 0),r([d(cc.Prefab)],e.prototype,"textAnswerButtonPrefab",void 0),r([d(cc.Prefab)],e.prototype,"textChoiceButtonPrefab",void 0),r([d(cc.Animation)],e.prototype,"trafficLight",void 0),r([d(cc.Node)],e.prototype,"fullLayout",void 0),r([u.default()],e.prototype,"onLoad",null),r([f],e)}(l.default);n.default=g,cc._RF.pop()},{"../../../common/scripts/game":void 0,"../../../common/scripts/lib/config":void 0,"../../../common/scripts/lib/error-handler":void 0,"../../../common/scripts/util":void 0,"./whatisthisChoice":"whatisthisChoice"}],whatisthisChoice:[function(t,e,n){"use strict";cc._RF.push(e,"7a899DiOUlB9K3guxqBj0hk","whatisthisChoice");var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./picturemeaning"),a=t("../../../common/scripts/util"),s=cc._decorator,u=s.ccclass,p=s.property,l=!0,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.image=null,e.data=null,e.answerNode=null,e.soundClip=null,e}return o(e,t),e.prototype.onLoad=function(){var t=this;l=!0,this.data.type==c.PictureMeaningType.Sentence?this.label.string=this.data.text:a.Util.loadTexture(this.data.pic,function(e){null!=e&&(t.image.spriteFrame=new cc.SpriteFrame(e),a.Util.resizeSprite(t.image,260,206))}),a.Util.loadGameSound(this.data.sound,function(e){t.soundClip=e})},e.prototype.makeInteractable=function(t){this.node.parent.children.forEach(function(e){e.getComponent(cc.Button).interactable=t})},e.prototype.onClick=function(){var t=this;if(l)if(l=!1,this.makeInteractable(!1),null!=this.soundClip&&this.scheduleOnce(function(){a.Util.play(t.soundClip,!1)},.5),0==this.data.index)this.node.emit("whatisthisCorrect");else{this.node.emit("whatisthisWrong");var e=this.answerNode.y;(new cc.Tween).target(this.answerNode).to(.5,{y:0},{progress:null,easing:"quadOut"}).delay(3).to(.5,{y:e},{progress:null,easing:"quadOut"}).call(function(){l=!0,t.makeInteractable(!0)}).start()}},r([p(cc.Label)],e.prototype,"label",void 0),r([p(cc.Sprite)],e.prototype,"image",void 0),r([u],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../common/scripts/util":void 0,"./picturemeaning":"picturemeaning"}]},{},["picturemeaning","whatisthisChoice"]);