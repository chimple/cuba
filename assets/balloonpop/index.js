window.__require=function t(o,e,n){function r(c,a){if(!e[c]){if(!o[c]){var l=c.split("/");if(l=l[l.length-1],!o[l]){var s="function"==typeof __require&&__require;if(!a&&s)return s(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+c+"'")}c=l}var d=e[c]={exports:{}};o[c][0].call(d.exports,function(t){return r(o[c][1][t]||t)},d,d.exports,t,o,e,n)}return e[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({"balloon-burst":[function(t,o,e){"use strict";cc._RF.push(o,"3109aM85OZHSpJ8F3Ie9Bok","balloon-burst");var n,r=this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),i=this&&this.__decorate||function(t,o,e,n){var r,i=arguments.length,c=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,o,e,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(o,e,c):r(o,e))||c);return i>3&&c&&Object.defineProperty(o,e,c),c};Object.defineProperty(e,"__esModule",{value:!0});var c=t("../../../common/scripts/drag"),a=t("../../../common/scripts/util"),l=t("./balloonpop"),s=cc._decorator,d=s.ccclass,p=(s.property,function(t){function o(){return null!==t&&t.apply(this,arguments)||this}var e;return r(o,t),e=o,o.prototype.onEnable=function(){this.enableTouch()},o.prototype.enableTouch=function(){this.node.on("touchstart",this.onTouchStart,this)},o.prototype.onTouchStart=function(){if(null!=this.node.getChildByName("label")){this.node.getChildByName("label").destroy(),this.node.getChildByName("balloon_texture").destroy();var t=this.node.getComponentInChildren(cc.Label).string;t>="1"&&t<="99"?a.Util.loadNumericSound(t,function(t){null!=t&&a.Util.play(t)}):a.Util.loadsLetter(t.toLowerCase(),function(t){null!=t&&a.Util.play(t)}),this.burstBalloonAnimation(),this.node.parent.getComponent("balloonpop").createSingleBallon(this.node.x),this.node.getComponentInChildren(cc.Label).string===l.default.correctLetter?(e.letterBursted=e.letterBursted+1/l.default.letterNo,this.node.parent.getComponent("balloonpop").letterProgress(),e.wrongMoves=0,this.node.parent.emit("correct")):(e.letterBursted>0&&(e.letterBursted=e.letterBursted-1/l.default.letterNo,this.node.parent.getComponent("balloonpop").letterProgress()),this.node.parent.emit("wrong"),e.wrongMoves++)}},o.prototype.burstBalloonAnimation=function(){var t=this.node.getComponent(cc.Animation);null!=t&&t.play()},o.prototype.update=function(){this.node.position.y>cc.winSize.height/2&&(this.node.parent.getComponent("balloonpop").createSingleBallon(this.node.x),this.node.destroy())},o.letterBursted=0,o.wrongMoves=0,e=i([d],o)}(c.default));e.default=p,cc._RF.pop()},{"../../../common/scripts/drag":void 0,"../../../common/scripts/util":void 0,"./balloonpop":"balloonpop"}],balloonpop:[function(t,o,e){"use strict";cc._RF.push(o,"3a473crEwRLD5IYdmHnutD8","balloonpop");var n,r=this&&this.__extends||(n=function(t,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),i=this&&this.__decorate||function(t,o,e,n){var r,i=arguments.length,c=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,o,e,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(o,e,c):r(o,e))||c);return i>3&&c&&Object.defineProperty(o,e,c),c};Object.defineProperty(e,"__esModule",{value:!0});var c=t("../../../common/scripts/game"),a=t("../../../common/scripts/lessonController"),l=t("../../../common/scripts/lib/config"),s=t("../../../common/scripts/util"),d=t("./balloon-burst"),p=cc._decorator,u=p.ccclass,h=p.property,f=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.balloon=null,o.displayCard=null,o.backgroundPlatform=null,o.progressBar=null,o.prgbar=null,o.currentConfig=null,o}var e;return r(o,t),e=o,o.prototype.onLoad=function(){var t=this;cc.director.getPhysicsManager().enabled=!0;var o=cc.instantiate(this.displayCard),n=cc.instantiate(this.backgroundPlatform);this.node.addChild(n),n.scale=1,n.setPosition(-cc.winSize.width/2+cc.winSize.height/25,-390),this.node.addChild(o),this.currentConfig=this.processConfiguration(l.default.getInstance().data[0]),o.getChildByName("label").getComponent(cc.Label).string=this.currentConfig.answer,e.correctLetter=this.currentConfig.answer,e.letterNo=this.currentConfig.clickOnAnswer,this.friendPos.scale=.5,this.friendPos.setPosition(-cc.winSize.width/2+cc.winSize.height/8,-cc.winSize.height/2+cc.winSize.height/6.7),cc.tween(o).to(1,{scale:.5},{easing:"quintInOut"}).call(function(){t.playAudio(),o.runAction(cc.sequence(cc.spawn(cc.moveTo(1,cc.v2(-cc.winSize.width/2+cc.winSize.height/8,-cc.winSize.height/2+cc.winSize.height/1.9),0),cc.scaleTo(.5,.08)),cc.scaleTo(.5,.08),cc.callFunc(t.displayLetterInProgressBar,t,o),cc.callFunc(t.displayProgressBar,t,t.name),cc.callFunc(t.createBallon,t,t.name)))}).start()},o.prototype.createBallon=function(){this.maxBalloon=Math.floor(cc.winSize.width/160),cc.log(this.maxBalloon+"<------");for(var t=1;t<this.maxBalloon;t++){var o=cc.instantiate(this.balloon);this.node.addChild(o),o.getComponentInChildren(cc.Label).string=this.currentConfig.options[Math.floor(0+Math.random()*(this.currentConfig.options.length-0))],o.setPosition(-cc.winSize.width/2+cc.winSize.height/8+o.width*t,-480);var e=cc.color(Math.round((205*Math.random()+50)%255),Math.round((205*Math.random()+50)%255),Math.round((205*Math.random()+50)%255));o.getChildByName("balloon_texture").color=e,o.addComponent(cc.RigidBody).gravityScale=.1*Math.random()-.2,o.getChildByName("burst_node").color=e}},o.prototype.createSingleBallon=function(){if(this.node.children.length<20){var t=cc.instantiate(this.balloon);this.node.addChild(t),t.getComponentInChildren(cc.Label).string=this.currentConfig.options[Math.floor(0+Math.random()*(this.currentConfig.options.length-0))],t.setPosition(-cc.winSize.width/2+cc.winSize.height/8+t.width*Math.floor(1+Math.random()*(this.maxBalloon-1)),-550);var o=cc.color(Math.round((205*Math.random()+50)%255),Math.round((205*Math.random()+50)%255),Math.round((205*Math.random()+50)%255));t.getChildByName("balloon_texture").color=o,d.default.wrongMoves>=2?t.addComponent(cc.RigidBody).gravityScale=-.05*Math.random()-.05:t.addComponent(cc.RigidBody).gravityScale=.1*Math.random()-.2,t.getChildByName("burst_node").color=o}},o.prototype.playAudio=function(){this.currentConfig.answer>="1"&&this.currentConfig.answer<="99"?s.Util.loadNumericSound(this.currentConfig.answer,function(t){null!=t&&a.default.getFriend().speak(t)}):s.Util.loadsLetter(this.currentConfig.answer.toLowerCase(),function(t){null!=t&&a.default.getFriend().speak(t)})},o.prototype.displayProgressBar=function(){this.progressBar.active=!0,this.progressBar.setPosition(-cc.winSize.width/2+cc.winSize.height/8,-cc.winSize.height/2+cc.winSize.height/1.4),this.prgbar.progress=0},o.prototype.displayLetterInProgressBar=function(t){t.getChildByName("frontFace").active=!1,t.getChildByName("shadowFace").active=!1,t.getChildByName("label").color=cc.Color.WHITE},o.prototype.letterProgress=function(){this.prgbar.progress=d.default.letterBursted,this.prgbar.progress>=1&&(d.default.letterBursted=0,this.node.pauseSystemEvents(!0),this.node.emit("correct"),this.node.emit("nextProblem"))},o.prototype.onDestroy=function(){d.default.letterBursted=0,this.node.destroy()},o.prototype.processConfiguration=function(t){void 0===t&&(t=[]);var o=[].concat.apply([],t),e=o[0],n=o[1],r=o[2],i=o[3],c=o[4],a=o[5],l=o[6],s=o[7];return{level:e,worksheet:n,problem:r,problemCount:i,answer:c,clickOnAnswer:a,options:l=l.split(","),audio:s}},i([h(cc.Prefab)],o.prototype,"balloon",void 0),i([h(cc.Prefab)],o.prototype,"displayCard",void 0),i([h(cc.Prefab)],o.prototype,"backgroundPlatform",void 0),i([h(cc.Node)],o.prototype,"progressBar",void 0),i([h(cc.ProgressBar)],o.prototype,"prgbar",void 0),e=i([u],o)}(c.default);e.default=f,cc._RF.pop()},{"../../../common/scripts/game":void 0,"../../../common/scripts/lessonController":void 0,"../../../common/scripts/lib/config":void 0,"../../../common/scripts/util":void 0,"./balloon-burst":"balloon-burst"}]},{},["balloon-burst","balloonpop"]);