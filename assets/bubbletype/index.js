window.__require=function e(t,o,i){function n(s,l){if(!o[s]){if(!t[s]){var a=s.split("/");if(a=a[a.length-1],!t[a]){var c="function"==typeof __require&&__require;if(!l&&c)return c(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var d=o[s]={exports:{}};t[s][0].call(d.exports,function(e){return n(t[s][1][e]||e)},d,d.exports,e,t,o,i)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({bubbletype:[function(e,t,o){"use strict";cc._RF.push(t,"20136wzERpIRK5KrH31nDor","bubbletype");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.GAME_SOUND=void 0;var s=cc._decorator,l=s.ccclass,a=s.property,c=e("../../../common/scripts/lib/error-handler"),d=e("../../../common/scripts/lib/config"),h=e("../../../common/scripts/util"),u=e("../../../common/scripts/game");o.GAME_SOUND="games/starfall/sound/";var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.bubblePrefab=null,t.buttonPrefab=null,t.fallingTime=30,t.inputBoxString="",t.correctAudio=null,t.popAudio=null,t.wrongAudio=null,t.words=[],t.wordsOnScreen=["","",""],t.score=0,t.maxScore=0,t.isScenePoped=!1,t.isFirstPageKeys=!0,t.bubbledestroyBoundry=520,t._sound=null,t}return n(t,e),t.prototype.onLoad=function(){this.alphabets=JSON.stringify(this.processConfiguration(d.default.getInstance().data[0]).numberpads[0]).replace(new RegExp(/"/g),"");var e=d.default.getInstance().data[0],t=e[5]+"";this.words=t.split(" "),this.maxScore=parseInt(e[3]),this.startGame(),this.node.getChildByName("score").getComponent(cc.Label).string=this.score+"/"+this.maxScore,this.createDog()},t.prototype.startGame=function(){var e=this;d.default.i.direction==d.Direction.RTL&&(this.node.getChildByName("score").position=new cc.Vec2(-415,107),this.bubbledestroyBoundry=-520);for(var t=0;t<3;t++){var o=cc.instantiate(this.bubblePrefab),i=250*Math.random()+100,n=cc.moveTo(this.fallingTime*(t/3+1),this.bubbledestroyBoundry,i);o.position=new cc.Vec2(t/3*-500-500,i),d.default.i.direction==d.Direction.RTL&&(n=cc.moveTo(this.fallingTime*(t/3+1),this.bubbledestroyBoundry,i),o.position=new cc.Vec2(500+t/3*500,i)),o.name=(t+1).toString();var r=Math.floor(Math.random()*(this.words.length-0))+0;o.getChildByName("Label").getComponent(cc.Label).string=this.words[r],console.log(this.words[r].length),this.words[r].length>3&&(o.getChildByName("bubble").scaleX=1.5),this.wordsOnScreen[t]=this.words[r],this.node.getChildByName("bubblesFolder").addChild(o),o.runAction(cc.sequence([n,cc.callFunc(this.bubbleAnimationCallback,this,o.name)]))}for(var s=this.dataConvert(this.words),l=this.alphabets.split(" "),a=1,c=0;c<l.length;c++)if("$"!==l[c]){c>19&&l.length,c>29&&l.length;var u=cc.instantiate(this.buttonPrefab);u.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=l[c],u.name=l[c],u.on("touchend",this.callback,this),this.words.indexOf(u.name)>=0||s.indexOf(u.name)>=0?u.getComponent(cc.Button).interactable=!0:u.getComponent(cc.Button).interactable=!1,this.node.getChildByName("mainLayout").getChildByName("layout"+a).addChild(u),u.name==this.wordsOnScreen[0]&&h.Util.showHelp(u,u,function(){e.friend.playAnimation("blowing",1)})}else a++},t.prototype.createDog=function(){this.friendPos.setPosition(new cc.Vec2(-460,-50)),this.friendPos.scaleX=.4,this.friendPos.scaleY=.4,d.default.i.direction==d.Direction.RTL&&(this.friendPos.setPosition(new cc.Vec2(460,-50)),this.friendPos.scaleX=-.4)},t.prototype.callback=function(e){var t=this;if(e.target.getComponent(cc.Button).interactable){this.inputBoxString=this.inputBoxString.concat(e.target.name);for(var o=0;o<3;o++)if(this.wordsOnScreen[o]===this.inputBoxString){this.score+=1,null!=this.node&&(this.node.getChildByName("score").getComponent(cc.Label).string=this.score+"/"+this.maxScore,this.node.getChildByName("richText").getComponent(cc.RichText).string=this.inputBoxString,setTimeout(function(){t.inputBoxString="",null!=t.node&&(t.node.getChildByName("richText").getComponent(cc.RichText).string=t.inputBoxString)},500));var i=250*Math.random()+100,n=(o+1).toString();if(h.Util.speakLettersOrWords(this.inputBoxString,function(){t.score>=t.maxScore&&!t.isScenePoped&&(t.node.emit("nextProblem"),t.isScenePoped=!0),t.node.emit("correct")}),null!=this.node){this.node.getChildByName("bubble_pop_node").position=this.node.getChildByName("bubblesFolder").getChildByName(n).position,this.node.getChildByName("bubble_pop_node").getComponent(cc.Animation).play(),this.node.getChildByName("bubblesFolder").getChildByName(n).position=new cc.Vec2(100*Math.random()-700,i),d.default.i.direction==d.Direction.RTL&&(this.node.getChildByName("bubblesFolder").getChildByName(n).position=new cc.Vec2(700+100*Math.random(),i)),this.node.getChildByName("bubblesFolder").getChildByName(n).stopAllActions();var r=cc.moveTo(this.fallingTime,this.bubbledestroyBoundry,i),s=Math.floor(Math.random()*(this.words.length-0))+0;this.wordsOnScreen[parseInt(n)-1]=this.words[s],this.node.getChildByName("bubblesFolder").getChildByName(n).getChildByName("Label").getComponent(cc.Label).string=this.words[s],this.node.getChildByName("bubblesFolder").getChildByName(n).runAction(cc.sequence([r,cc.callFunc(this.bubbleAnimationCallback,this,n)]))}return}for(o=0;o<3;o++)if(this.wordsOnScreen[o].startsWith(this.inputBoxString))return void(null!=this.node&&(this.node.getChildByName("richText").getComponent(cc.RichText).string=this.inputBoxString));this.node.emit("wrong"),null!=this.node&&(setTimeout(function(){t.inputBoxString="",null!=t.node&&(t.node.getChildByName("richText").getComponent(cc.RichText).string=t.inputBoxString)},100),this.node.getChildByName("richText").getComponent(cc.RichText).string=this.inputBoxString)}},t.prototype.dataConvert=function(){for(var e=[],t=0;t<this.words.length;t++)for(var o=0;o<this.words[t].length;o++)e.push(this.words[t].charAt(o));for(o=0;o<this.alphabets.length;o++)-1!=e.indexOf(this.alphabets.substr(o,1))&&console.log(this.alphabets.substr(o,1),"<<");return e},t.prototype.bubbleAnimationCallback=function(e){if(console.log("Her is log of console"),null!=this.node){var t=250*Math.random()+100;this.node.getChildByName("bubblesFolder").getChildByName(e.name).position=new cc.Vec2(this.node.getChildByName("bubblesFolder").getChildByName(e.name).x-1100,t),d.default.i.direction==d.Direction.RTL&&(this.node.getChildByName("bubblesFolder").getChildByName(e.name).position=new cc.Vec2(this.node.getChildByName("bubblesFolder").getChildByName(e.name).x+1100,t));var o=cc.moveTo(this.fallingTime,this.bubbledestroyBoundry,t),i=Math.floor(Math.random()*(this.words.length-0))+0;this.wordsOnScreen[parseInt(e.name)-1]=this.words[i],this.node.getChildByName("bubblesFolder").getChildByName(e.name).getChildByName("Label").getComponent(cc.Label).string=this.words[i],this.node.getChildByName("bubblesFolder").getChildByName(e.name).runAction(cc.sequence([o,cc.callFunc(this.bubbleAnimationCallback,this,e.name)]))}},t.prototype.processConfiguration=function(e){void 0===e&&(e=[]);var t=[].concat.apply([],e),o=t[0],i=t[1],n=t[2],r=t[3],s=t[4],l=t[5],a=t[6],c=t[7],d=t[8],h=t[9],u=t[10],p=t[11];return{level:o,worksheet:i,problemCount:n,wordRegenTime:r,words:s,numberofConsonantChoices:l,numberofVowelChoices:a,image:c,soundDuration:d,one:h,two:u,numberpads:p=p.split(",")}},r([a(cc.Label)],t.prototype,"label",void 0),r([a(cc.Prefab)],t.prototype,"bubblePrefab",void 0),r([a(cc.Prefab)],t.prototype,"buttonPrefab",void 0),r([a],t.prototype,"inputBoxString",void 0),r([a({type:cc.AudioClip})],t.prototype,"correctAudio",void 0),r([a({type:cc.AudioClip})],t.prototype,"popAudio",void 0),r([a({type:cc.AudioClip})],t.prototype,"wrongAudio",void 0),r([c.default()],t.prototype,"onLoad",null),r([c.default()],t.prototype,"startGame",null),r([c.default()],t.prototype,"createDog",null),r([c.default()],t.prototype,"callback",null),r([c.default()],t.prototype,"dataConvert",null),r([c.default()],t.prototype,"bubbleAnimationCallback",null),r([c.default()],t.prototype,"processConfiguration",null),r([l],t)}(u.default);o.default=p,cc._RF.pop()},{"../../../common/scripts/game":void 0,"../../../common/scripts/lib/config":void 0,"../../../common/scripts/lib/error-handler":void 0,"../../../common/scripts/util":void 0}]},{},["bubbletype"]);